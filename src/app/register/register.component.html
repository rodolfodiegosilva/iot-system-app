<div class="main-container register-container">
  <h2 class="register-title">Register</h2>
  <form [formGroup]="registerForm" (ngSubmit)="register()">
    <fieldset>
      <legend>Personal Information</legend>
      <div class="form-group">
        <label for="name">Name</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
          autocomplete="name"
        />
        <div *ngIf="f['name'].touched && f['name'].invalid" class="error">
          <div *ngIf="f['name'].errors?.['required']">Name is required.</div>
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="form-control"
          autocomplete="email"
        />
        <div *ngIf="f['email'].touched && f['email'].invalid" class="error">
          <div *ngIf="f['email'].errors?.['required']">Email is required.</div>
          <div *ngIf="f['email'].errors?.['email']">Invalid email format.</div>
        </div>
      </div>
    </fieldset>

    <fieldset>
      <legend>Account Details</legend>
      <div class="form-group">
        <label for="username">Username</label>
        <input
          type="text"
          id="username"
          formControlName="username"
          class="form-control"
          autocomplete="username"
        />
        <div
          *ngIf="f['username'].touched && f['username'].invalid"
          class="error"
        >
          <div *ngIf="f['username'].errors?.['required']">
            Username is required.
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input
          type="password"
          id="password"
          formControlName="password"
          class="form-control"
          autocomplete="new-password"
        />
        <div
          *ngIf="f['password'].touched && f['password'].invalid"
          class="error"
        >
          <div *ngIf="f['password'].errors?.['required']">
            Password is required.
          </div>
          <div *ngIf="f['password'].errors?.['minlength']">
            Password must be at least 8 characters long.
          </div>
          <div *ngIf="f['password'].errors?.['passwordStrength']">
            Password must contain at least one uppercase letter, one lowercase
            letter, one number, and one special character.
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          class="form-control"
          autocomplete="new-password"
        />
        <div
          *ngIf="f['confirmPassword'].touched && f['confirmPassword'].invalid"
          class="error"
        >
          <div *ngIf="f['confirmPassword'].errors?.['required']">
            Confirm Password is required.
          </div>
          <div *ngIf="f['confirmPassword'].errors?.['mustMatch']">
            Passwords must match.
          </div>
        </div>
      </div>
    </fieldset>

    <button
      type="submit"
      [disabled]="registerForm.invalid"
      class="submit-btn"
      [ngClass]="{ 'disabled-btn': registerForm.invalid }"
    >
      Register
    </button>
    <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success-card">{{ successMessage }}</div>
  </form>

  <div class="login-link">

    <div>Already have an account?</div>
    <button (click)="navigateToLogin()" class="btn btn-link">Login</button>
  </div>
</div>
